<!DOCTYPE html>
<html>
<head>
  <title>Play Data, Play Ball ! !</title>
  <meta charset="utf-8">
  <meta name="description" content="Play Data, Play Ball ! !">
  <meta name="author" content="Summit Suen">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="./assets/css/playball.css"></link>
<link rel=stylesheet href="./assets/css/ribbons.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <hgroup class="auto-fadein">
    <h1>Play Data, Play Ball ! !</h1>
    <h2>Dig Deeper</h2>
    <p>Summit Suen<br/>Taiwan R User Group</p>
  </hgroup>
  <article></article>  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <hgroup>
    <h2>Recap</h2>
  </hgroup>
  <article data-timings="">
    <h3>Introduction to Baseball Analytics</h3>

<ul>
<li><a href="https://www.edx.org/course/sabermetrics-101-introduction-baseball-bux-sabr101x-0">BUx edX | Sabermetrics 101</a></li>
</ul>

<h3>Useful R packages</h3>

<ul>
<li><a href="http://lahman.r-forge.r-project.org/">Lahman Database</a></li>
<li><a href="http://cpsievert.github.io/pitchRx/#2D_animation">pitchRx</a></li>
<li><a href="https://baseballwithr.wordpress.com/2014/03/17/introduction-to-openwar/">openWAR</a></li>
<li><a href="http://ropensci.github.io/RSelenium/">RSelenium</a></li>
<li><a href="http://phantomjs.org/">phantomJS</a></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h2>Sabermetrics</h2>
  </hgroup>
  <article data-timings="">
    <h3>Pythagorean theorem</h3>

<p>\[
\frac{RS^2}{RS^2 + RA^2} = \text{Est. Winning Percentage} \text{, where RS = Runs Scored, RA = Runs Allowed}
\]
\[
\text{i.e., Est. Winning Percentage} = \frac{R^n}{R^n + 1} \text{, where } R = \frac{RS}{RA} \text{as the scoring ratio}
\]</p>

<p><img src="assets/fig/unnamed-chunk-1-1.png" alt="plot of chunk unnamed-chunk-1"> </p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h2>Sabermetrics</h2>
  </hgroup>
  <article data-timings="">
    <h3>Runs Created formula</h3>

<ul>
<li>From common sense to a linear weighted model</li>
</ul>

<p>\[
TB = Singles + 2\times Doubles(2B) + 3\times Triples(3B) + 4\times HR
\]</p>

<p>\[
\text{ Predicted runs = constant + B1(BB + HBP) }\\
\text{ + B2(singles) + B3(2B) + B4(3B) }\\
\text{ + B5(HR) + B6(SB) + B7(CS) }\\
\]</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>Sabermetrics</h2>
  </hgroup>
  <article data-timings="">
    <h3>Win Above Replacement</h3>

<p><a href="https://baseballwithr.wordpress.com/category/openwar/">openWAR</a></p>

<p><img src="assets/img/war2014.png" alt=""></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>openWAR</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">require(openWAR)
source(&quot;~/Documents/openWAR/R/GameDay.R&quot;)
getGameIds(date=as.Date(&quot;2015-04-05&quot;))
</code></pre>

<pre><code>## 
## Retrieving data from 2015-04-05 ...
## ...found 2 games
</code></pre>

<pre><code>## [1] &quot;gid_2015_04_05_slnmlb_chnmlb_1&quot; &quot;gid_2015_04_05_zznmlb_zzamlb_1&quot;
</code></pre>

<pre><code class="r">gd = gameday(gameId=&quot;gid_2015_04_05_slnmlb_chnmlb_1&quot;)
</code></pre>

<pre><code>## gid_2015_04_05_slnmlb_chnmlb_1
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>openWAR</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">gd$url
</code></pre>

<pre><code>##                                                                                                        bis_boxscore.xml 
##      &quot;http://gd2.mlb.com/components/game/mlb/year_2015/month_04/day_05/gid_2015_04_05_slnmlb_chnmlb_1/bis_boxscore.xml&quot; 
##                                                                                                          inning_all.xml 
## &quot;http://gd2.mlb.com/components/game/mlb/year_2015/month_04/day_05/gid_2015_04_05_slnmlb_chnmlb_1/inning/inning_all.xml&quot; 
##                                                                                                          inning_hit.xml 
## &quot;http://gd2.mlb.com/components/game/mlb/year_2015/month_04/day_05/gid_2015_04_05_slnmlb_chnmlb_1/inning/inning_hit.xml&quot; 
##                                                                                                                game.xml 
##              &quot;http://gd2.mlb.com/components/game/mlb/year_2015/month_04/day_05/gid_2015_04_05_slnmlb_chnmlb_1/game.xml&quot; 
##                                                                                                         game_events.xml 
##       &quot;http://gd2.mlb.com/components/game/mlb/year_2015/month_04/day_05/gid_2015_04_05_slnmlb_chnmlb_1/game_events.xml&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>openWAR</h2>
  </hgroup>
  <article data-timings="">
    <p><img src="assets/img/plays_xml.png" alt=""></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>openWAR</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">str(gd$ds)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    75 obs. of  62 variables:
##  $ pitcherId     : num  452657 452657 452657 452657 452657 ...
##  $ batterId      : num  572761 518792 407812 425509 571431 ...
##  $ field_teamId  : chr  &quot;112&quot; &quot;112&quot; &quot;112&quot; &quot;112&quot; ...
##  $ ab_num        : num  1 2 3 4 5 6 7 8 9 10 ...
##  $ inning        : num  1 1 1 1 1 1 1 1 1 2 ...
##  $ half          : Factor w/ 2 levels &quot;bottom&quot;,&quot;top&quot;: 2 2 2 2 2 1 1 1 1 2 ...
##  $ balls         : num  2 1 2 0 1 1 1 2 2 1 ...
##  $ strikes       : num  2 0 0 3 3 0 2 3 1 3 ...
##  $ endOuts       : num  1 1 1 2 3 0 1 2 3 1 ...
##  $ event         : Factor w/ 18 levels &quot;Caught Stealing 2B&quot;,..: 7 3 15 17 17 3 7 17 7 17 ...
##  $ actionId      : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ description   : Factor w/ 94 levels &quot;Adam Wainwright called out on strikes.  &quot;,..: 51 23 55 32 49 20 39 4 79 93 ...
##  $ stand         : Factor w/ 2 levels &quot;L&quot;,&quot;R&quot;: 1 1 2 2 1 1 2 1 2 2 ...
##  $ throws        : Factor w/ 2 levels &quot;L&quot;,&quot;R&quot;: 1 1 1 1 1 2 2 2 2 1 ...
##  $ runnerMovement: Factor w/ 45 levels &quot;&quot;,&quot;[407812::1B::Walk]&quot;,..: 1 26 28 1 3 17 18 1 19 1 ...
##  $ x             : num  142 190 175 NA NA ...
##  $ y             : num  159 119 127 NA NA ...
##  $ game_type     : Factor w/ 1 level &quot;R&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ home_team     : Factor w/ 1 level &quot;chn&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ home_teamId   : num  112 112 112 112 112 112 112 112 112 112 ...
##  $ home_lg       : Factor w/ 1 level &quot;NL&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ away_team     : Factor w/ 1 level &quot;sln&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ away_teamId   : num  138 138 138 138 138 138 138 138 138 138 ...
##  $ away_lg       : Factor w/ 1 level &quot;NL&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ venueId       : num  17 17 17 17 17 17 17 17 17 17 ...
##  $ stadium       : Factor w/ 1 level &quot;Wrigley Field&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ timestamp     : chr  &quot;2015-04-06 00:16:58&quot; &quot;2015-04-06 00:19:47&quot; &quot;2015-04-06 00:18:55&quot; &quot;2015-04-06 00:20:42&quot; ...
##  $ playerId.C    : num  424325 424325 424325 424325 424325 ...
##  $ playerId.1B   : num  519203 519203 519203 519203 519203 ...
##  $ playerId.2B   : num  6e+05 6e+05 6e+05 6e+05 6e+05 ...
##  $ playerId.3B   : num  592609 592609 592609 592609 592609 ...
##  $ playerId.SS   : num  516770 516770 516770 516770 516770 ...
##  $ playerId.LF   : num  458085 458085 458085 458085 458085 ...
##  $ playerId.CF   : num  451594 451594 451594 451594 451594 ...
##  $ playerId.RF   : num  624585 624585 624585 624585 624585 ...
##  $ batterPos     : chr  &quot;3B&quot; &quot;RF&quot; &quot;LF&quot; &quot;SS&quot; ...
##  $ batterName    : Factor w/ 30 levels &quot;Adams, M&quot;,&quot;Alcantara&quot;,..: 4 9 10 19 1 8 26 22 5 15 ...
##  $ pitcherName   : Factor w/ 30 levels &quot;Adams, M&quot;,&quot;Alcantara&quot;,..: 13 13 13 13 13 28 28 28 28 13 ...
##  $ runsOnPlay    : int  0 0 1 0 0 0 0 0 0 0 ...
##  $ startOuts     : num  0 1 1 1 2 0 0 1 2 0 ...
##  $ runsInInning  : int  1 1 1 1 1 0 0 0 0 1 ...
##  $ runsITD       : num  0 0 0 1 1 0 0 0 0 0 ...
##  $ runsFuture    : num  1 1 1 0 0 0 0 0 0 1 ...
##  $ start1B       : chr  NA NA NA &quot;407812&quot; ...
##  $ start2B       : chr  NA NA &quot;518792&quot; NA ...
##  $ start3B       : chr  NA NA NA NA ...
##  $ end1B         : chr  NA NA &quot;407812&quot; &quot;407812&quot; ...
##  $ end2B         : chr  NA &quot;518792&quot; NA NA ...
##  $ end3B         : chr  NA NA NA NA ...
##  $ outsInInning  : num  3 3 3 3 3 3 3 3 3 3 ...
##  $ startCode     : num  0 0 2 1 1 0 2 4 4 0 ...
##  $ endCode       : num  0 2 1 1 0 2 4 4 0 0 ...
##  $ fielderId     : num  6e+05 NA NA NA NA ...
##  $ gameId        : chr  &quot;gid_2015_04_05_slnmlb_chnmlb_1&quot; &quot;gid_2015_04_05_slnmlb_chnmlb_1&quot; &quot;gid_2015_04_05_slnmlb_chnmlb_1&quot; &quot;gid_2015_04_05_slnmlb_chnmlb_1&quot; ...
##  $ isPA          : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...
##  $ isAB          : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...
##  $ isHit         : logi  FALSE TRUE TRUE FALSE FALSE TRUE ...
##  $ isBIP         : logi  TRUE TRUE TRUE FALSE FALSE TRUE ...
##  $ our.x         : num  42.2 163.2 124.3 NA NA ...
##  $ our.y         : num  99.1 200.4 180.7 NA NA ...
##  $ r             : num  108 258 219 NA NA ...
##  $ theta         : num  1.168 0.887 0.968 NA NA ...
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>openWAR</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">ggplot(data = gd$ds, aes(x = x, y = y, color = isHit)) + geom_point(size = 3) + coord_fixed()
</code></pre>

<p><img src="assets/fig/unnamed-chunk-5-1.png" alt="plot of chunk unnamed-chunk-5"> </p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>Data Source</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Lahman database (A classic default sample data)</li>
<li>MLBAM: Gameday (Real-time request)</li>
<li>Official website (Crawler)</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>CPBL</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">load(&quot;hr_tables.RData&quot;)
tail(hr_tables[[26]])
</code></pre>

<pre><code>##    NUMBER YEAR GID      DATE STADIUM   BATTER   BATTERTEAM  PITCHER
## 60     59 2015  38 2015/4/17    桃園 林 智 勝       Lamigo 邱 浩 鈞
## 61     60 2015  38 2015/4/17    桃園 唐 肇 廷 統一7-ELEVEn 王 溢 正
## 62     61 2015  39 2015/4/18  澄清湖 方 玄 宗         義大 鄭 凱 文
## 63     62 2015  39 2015/4/18  澄清湖 高 國 輝         義大 林 英 傑
## 64     63 2015  39 2015/4/18  澄清湖 高 國 輝         義大 陳 鴻 文
## 65     64 2015  41 2015/4/19  澄清湖    佩 卓     中信兄弟 史 密 斯
##     PITCHERTEAM RBI           REMARK
## 60 統一7-ELEVEn   1                 
## 61       Lamigo   1                 
## 62     中信兄弟   2                 
## 63     中信兄弟   2                 
## 64     中信兄弟   2                 
## 65         義大   1 首局首打席全壘打
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>Early Power Surge: is that real?</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">tail(filter(hr_tables[[22]], DATE == &quot;2011/4/21&quot;), 1)
</code></pre>

<pre><code>##   NUMBER YEAR GID      DATE STADIUM   BATTER BATTERTEAM  PITCHER
## 3     50 2011  46 2011/4/21    台南 鍾 承 祐     Lamigo 高 建 三
##    PITCHERTEAM RBI REMARK
## 3 統一7-ELEVEn   1
</code></pre>

<pre><code class="r">tail(filter(hr_tables[[23]], DATE == &quot;2012/4/20&quot;), 1)
</code></pre>

<pre><code>##   NUMBER YEAR GID      DATE STADIUM   BATTER BATTERTEAM  PITCHER
## 2     39 2012  48 2012/4/20    桃園 彭 政 閔       兄弟 曾 孟 承
##   PITCHERTEAM RBI REMARK
## 2      Lamigo   2
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>Early Power Surge: is that real?</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">tail(filter(hr_tables[[24]], DATE == &quot;2013/4/20&quot;), 1)
</code></pre>

<pre><code>##   NUMBER YEAR GID      DATE STADIUM   BATTER BATTERTEAM  PITCHER
## 1     28 2013  40 2013/4/20    新莊 林 益 全       義大 潘 威 倫
##    PITCHERTEAM RBI REMARK
## 1 統一7-ELEVEn   2
</code></pre>

<pre><code class="r">tail(filter(hr_tables[[25]], DATE == &quot;2014/4/22&quot;), 1)
</code></pre>

<pre><code>##   NUMBER YEAR GID      DATE STADIUM   BATTER   BATTERTEAM  PITCHER
## 1     26 2014  44 2014/4/22    桃園 張 泰 山 統一7-ELEVEn 朱 俊 祥
##   PITCHERTEAM RBI REMARK
## 1      Lamigo   1
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2>Early Power Surge: is that real?</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">tail(filter(hr_tables[[26]], DATE == &quot;2015/4/19&quot;), 1)
</code></pre>

<pre><code>##   NUMBER YEAR GID      DATE STADIUM BATTER BATTERTEAM  PITCHER PITCHERTEAM
## 1     64 2015  41 2015/4/19  澄清湖  佩 卓   中信兄弟 史 密 斯        義大
##   RBI           REMARK
## 1   1 首局首打席全壘打
</code></pre>

<p>Will we see much more HRs this year?</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h2>Early Power Surge: is that real?</h2>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='Recap'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Sabermetrics'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Sabermetrics'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Sabermetrics'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='openWAR'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='openWAR'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='openWAR'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='openWAR'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='openWAR'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='Data Source'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='CPBL'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Early Power Surge: is that real?'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='Early Power Surge: is that real?'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='Early Power Surge: is that real?'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='Early Power Surge: is that real?'>
         15
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>